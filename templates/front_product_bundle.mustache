{{!
    This file is part of The Local Shop Plugin

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_shop/frontproductbundle

    Classes required for JS:
    * none

}}
<!-- frontproductbundle -->
<div class="shop-article bundle" data-pid="{{id}}">

    <div class="shop-front-productpix">{{{image}}}</div>

    <div class="shop-front-productdef">
        {{#ispart}}
            <div class="shop-front-partof">{{{name}}}</div>
        {{/ispart}}
        {{^ispart}}
            {{^smarturl}}
            <h1>{{{name}}}</h1>
<<<<<<< HEAD
<<<<<<< HEAD
            {{#hasdescription}}
                <h2 class="shop-front-description {{#shortdescription}}shop-desc-gradient{{/shortdescription}}">
                    {{{description}}}
                </h2>
                {{#shortdescription}}
                <div class="shop-front-description-toggle">
                    <img src="{{{shorthandlepixurl}}}" alt="{{readmorestr}}" title="{{readmorestr}}" id="description-toggle-{{shortname}}" class="shop-description-toggle">
                </div>
                {{/shortdescription}}
            {{/hasdescription}}
=======
=======
            {{/smarturl}}
            {{#smarturl}}
            <a href="{{{smarturl}}}" target="_blank"><h1>{{name}}</h1></a>
            {{/smarturl}}
>>>>>>> MOODLE_401_STABLE
            {{> local_shop/front_modal_product }}
>>>>>>> MOODLE_40_STABLE
        {{/ispart}}

        {{#hasleaflet}}
            <div class="shop-front-leaflet"><a href="{{{leafleturl}}}" target="_blank">{{linklabel}}</a></div>
        {{/hasleaflet}}

<<<<<<< HEAD
        <div class="shop-front-refblock">
=======
        <div class="shop-front-bundle-content">
>>>>>>> MOODLE_40_STABLE

            <div class="shop-front-bundle-elements">
                {{#elements}}
                    {{> local_shop/front_product_block}}
                {{/elements}}
<<<<<<< HEAD
            </div>

            <div class="shop-front-pricelist">
                <div class="shop-front-ref">{{refstr}}&nbsp;: {{code}}</div>
                {{^pricelist}}
                <div class="shop-front-label">{{puttcstr}}</div>
                <div class="shop-front-price">{{price}}&nbsp;{{{currencystr}}}</div>
                {{/pricelist}}
                {{#pricelist}}

                {{#prices}}
                <div class="shop-front-label">{{puttcstr}}</div>
                <div class="shop-front-pricerange">{{range}}&nbsp;: </div>
                <div class="shop-front-price">{{price}}&nbsp;{{{currencystr}}}</div>
                {{/prices}}
                {{/pricelist}}
            </div>

            <div class="shop-front-order">
                {{#password}}

                <input type="text"
                       id = "ci-pass-{{shortname}}"
                       value = ""
                       maxlength = "8"
                       size = "8"
                       onkeypress = "{{{jshandler}}}"
                       title = "{{needspasscodetobuystr}}" />
                <div id="ci-pass-status-{{shortname}}" class="shop-pass-state"></div>
                {{/password}}

                <input type="button"
                    id = "ci-{{shortname}}"
                    value = "{{buystr}}"
                    onclick = "{{{jshandleraddunit}}}" {{{disabled}}} />

            </div>

            <div class="shop-order-bag">
                <div class = "shop-order-item" id="bag_{{shortname}}">
                    {{{units}}}
                </div>
=======
            </div>

            {{#canorder}}
            <div class="shop-front-refblock">
                <div class="shop-front-ref-group">
                    <div class="shop-front-ref">{{refstr}}&nbsp;: {{{code}}}</div>

                    <div class="shop-front-pricelist">
                        {{^pricelist}}
                        <div class="shop-front-label">{{puttcstr}}</div>
                        <div class="shop-front-price-container"><div class="shop-front-price">{{price}}&nbsp;{{{currencystr}}}</div></div>
                        {{/pricelist}}
                        {{#pricelist}}

                        <div class="shop-front-label">{{puttcstr}}</div>
                            {{#prices}}
                            <div class="shop-front-pricerange">{{range}}&nbsp;: </div>
                            <div class="shop-front-price-container"><div class="shop-front-price">{{price}}&nbsp;{{{currencystr}}}</div></div>
                            {{/prices}}
                        {{/pricelist}}
                    </div>
                </div>

                <div class="shop-front-ref-group">
                    {{#available}}
                    <div class="shop-front-order">
                        {{#password}}
                        <input type="text"
                                id="ci-pass-{{shortname}}"
                                data-product="{{shortname}}"
                                value=""
                                maxlength="8"
                                size="8"
                                class="local-shop-password"
                                title="{{needspasscodetobuystr}}" />
                        <div id="ci-pass-status-{{shortname}}" class="shop-pass-state"></div>

                        {{/password}}
                        <input type="button"
                                        id="ci-{{shortname}}"
                                        value="{{buystr}}"
                                        data-seoalias="{{seoalias}}"
                                        data-product="{{shortname}}"
                                        data-maxquant="{{maxdeliveryquant}}"
                                        class="local-shop-add-unit"
                                        {{{disabled}}} />

                    </div>
                    {{/available}}

                    <div class="shop-order-bag">
                        <div class="shop-order-item" id="bag_{{shortname}}">{{{units}}}</div>
                    </div>
                </div>
>>>>>>> MOODLE_40_STABLE
            </div>
            {{/canorder}}

        </div>
    </div>
</div>
<!-- /frontproductbundle -->
