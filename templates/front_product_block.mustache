{{!
    This file is part of The Local Shop Plugin

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_shop/productblock

    Classes required for JS:
    * none

}}
<!-- productblock -->
<a name="{{code}}"></a>
<div class="shop-article {{subelementclass}}">

    <div class="shop-front-productpix">{{{image}}}</div>

    <div class="shop-front-productdef">
        {{#isbundlepart}}
            <h3 class="shop-front-partof">{{name}}</h3>
            <div class="shop-front-description">{{{description}}}</div>
        {{/isbundlepart}}
        {{^isbundlepart}}
            {{#showname}}
            {{^issetpart}}
            <h2>{{name}}</h2>
            {{/issetpart}}
            {{#issetpart}}
            <h4>{{name}}</h4>
            {{/issetpart}}
            {{/showname}}
            {{#showdescription}}
            <div class="shop-front-description">{{{description}}}</div>
            {{/showdescription}}
            {{#notavailable}}
            <div class="shop-not-available">{{notavailable}}</div>
            {{/notavailable}}

            {{#hasleaflet}}
            <div class="shop-front-leaflet">
                <a href="{{{leafleturl}}}" target="_blank">{{leafletlinkstr}}</a>
            </div>
            {{/hasleaflet}}

            {{#canorder}}
            <div class="shop-front-refblock">
                <div class="shop-front-ref">{{refstr}} : {{{code}}}</div>

                {{^pricelist}}
                <div class="shop-front-label">{{puttcstr}}</div>
                <div class="shop-front-price">{{price}} {{{currencystr}}}</div>
                {{/pricelist}}
                {{#pricelist}}

                <div class="shop-front-pricelist">
                    <div class="shop-front-label">{{puttcstr}}</div>
                    {{#prices}}
                    <div class="shop-front-pricerange">{{range}} : </div>
                    <div class="shop-front-price">{{price}} {{{currencystr}}}</div>
                    {{/prices}}
                </div>
                {{/pricelist}}

                {{#available}}
                <div class="shop-front-order">
                    {{#password}}
                    <input type="text" id="ci-pass-{{shortname}}" value="" maxlength="8" size="8"
                                       onkeypress="check_pass_code(\'{{shortname}}\', this, event)"
                                       title="{{needspasscodetobuystr}}" />
                    <div id="ci-pass-status-{{shortname}}" class="shop-pass-state"></div>

                    {{/password}}
                    <input type="button"
                                    id="ci-{{shortname}}"
                                    value="{{buystr}}"
                                    onclick="{{{jshandleraddunit}}}" {{{disabled}}} />
                    <div class="shop-order-item" id="bag_{{shortname}}"></div>
                    {{{units}}}
                </div>
                {{/available}}
            </div>
            {{/canorder}}
        </div>
        {{/isbundlepart}}
    </div>
</div>
<!-- /productblock -->